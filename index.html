<!DOCTYPE html>
<html>
<head>
	<link type="text/css" rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="action.js"></script>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <p class="navbar-text">Pokedex</p>
            </div>
        </div>
    </nav>
    
    <div class="container">
    
    <div class="row">
    <div class="col-md-8 col-xs-8">
        
    <table class="table">
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
         <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
       
        
    </table>
    </div>
        
    <div class="col-md-4 col-xs-4"><div id="card" class="thumbnail"></div></div>
    
    </div>
        
    <div class="row">
    <div class="col-md-8 col-xs-8">    
    <button class="btn btn-primary btn-lg">Load more</button>
    </div> 
    </div>
    
    </div>
    
    <script>var fromNum = 0; //where start getting new chunk
var counter = 1; //counter = pokemon's id
var i = 1; //variable for putting data into the table's row

/*---------------------------------------------------------------------------------------------------------------------------------------------*/
function getChank() {
    
    var j = 1; // --- table's cell
    $.getJSON('http://pokeapi.co/api/v2/pokemon/?limit=12&offset='+ fromNum +'', function (data) {
        for(var k=1; k<=12; k++){
            var c = k-1; //variable for array
            $('tr:nth-child(' + i + ') td:nth-child(' + j + ')').append("<img class=" + counter + " src='http://pokeapi.co/media/img/"+counter+".png/' /><br>" + data.results[c].name + "<p>"+counter+"</p>"); //add img and name 
           
            counter +=1;
            if (j<3){
                j++;
            } else {
                i++;
                j = 1;
                
            } 
        }    
    })
    fromNum = fromNum + 12; //to start getting new chunk after old 12 elements 
}
/*---------------------------------------------------------------------------------------------------------------------------------------------*/

function getCard(){
    window.onclick = function(event) {
        
        $("#card").html("");
        console.log(event.srcElement.className)// then e.srcElement.className has the class
        var number = parseFloat(event.srcElement.className);
        if (isNaN(number)){
            $("#card").hide();
        } else {
            $("#card").show(0.01);
            $.getJSON('http://pokeapi.co/api/v2/pokemon/'+number+'/', function (data) {
            $("#card").html("This is " + data.name + " pokemon.<br> <img src='http://pokeapi.co/media/img/"+number+".png/' /> <br>" +data.name+" #" + data.id); 
            getInfo(number);
            })
        }
        
    }
}

////////////////////////////////////////////////////////////////////////////////////////////
function getInfo(id){ 
        $.getJSON('http://pokeapi.co/api/v2/pokemon/'+id+'/', function (data) {
            $("div #card").append('<tr><td>Attack</td><td>' + data.stats[4].base_stat +'</td></tr>'); //attack
            $("div #card").append('<tr><td>Defence</td><td>' + data.stats[3].base_stat +'</td></tr>'); //defence
            $("div #card").append('<tr><td>HP</td><td>' + data.stats[4].base_stat +'</td></tr>'); //HP
            $("div #card").append('<tr><td>SP attack</td><td>' + data.stats[2].base_stat +'</td></tr>'); //SP attack
            $("div #card").append('<tr><td>SP attack</td><td>' + data.stats[1].base_stat +'</td></tr>');  //SP defence
            $("div #card").append('<tr><td>Speed</td><td>' + data.stats[0].base_stat +'</td></tr>'); //speed
            $("div #card").append('<tr><td>Weight</td><td>' + data.weight +'</td></tr>'); //weight
            $("div #card").append('<tr><td>Total moves</td><td>' + data.moves.length +'</td></tr>'); //total moves  
        })    
}
//////////////////////////////////////////////////////////////////////////////////////////////

/*---------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function(){
    getChank(); //base chunk
    $("button").click(function(){
        $("table").append("<tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr>"); //add table where we can put new data
        getChank(); //next chunk
    })
    getCard();
})</script>
    
    
</body>
</html>
